<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>flowium</title>
    <link rel="stylesheet" type="text/css" href="flowium.css">
</head>
<script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous">
</script>
<script src="utils.js"></script>
<script>

$(document).ready(function() {
    ghGet('issues', null, function(issues) {
        for(var i = 0; i < issues.length; i++) {
            var issue = issues[i]
            var item = '<p><a href="issue.html' +
                '?username=' + getUsername() +
                '&repository=' + getRepository() +
                '&issue=' + issue.number +
                '">#' + issue.number + ' ' + issue.title + '</a></p>'
            $("#open-issue").append(item)
        }
    });

    ghGet("contents/" + getPath(), null, function(files) {
        for(var i = 0; i < files.length; i++) {
            var f = files[i]
            if(!f.name.endsWith('.md')) continue
            var item = '<p><a href="create.html' +
                '?username=' + getUsername() +
                '&repository=' + getRepository() +
                '&template=' + getPath() + f.name +
                '">' + f.name + '</a></p>'
            $("#create-issue").append(item)
        }
    });
})

</script>
<body>
<h1>Open an issue</h1>
<div id='open-issue'></div>
<h1>Create an issue</h1>
<div id='create-issue'></div>
</body>
